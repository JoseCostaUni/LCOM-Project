\hypertarget{keyboard_8c}{}\doxysection{/home/bruno/\+Desktop/\+FEUP/2o ano/2o semetre/lcom/\+MINIX-\/\+LCOM/shared/g1/proj/src/mvc/controller/keyboard/keyboard.c File Reference}
\label{keyboard_8c}\index{/home/bruno/Desktop/FEUP/2o ano/2o semetre/lcom/MINIX-\/LCOM/shared/g1/proj/src/mvc/controller/keyboard/keyboard.c@{/home/bruno/Desktop/FEUP/2o ano/2o semetre/lcom/MINIX-\/LCOM/shared/g1/proj/src/mvc/controller/keyboard/keyboard.c}}


File containing the implementation of the functions to interact with the keyboard.  


{\ttfamily \#include \char`\"{}lcom/lcf.\+h\char`\"{}}\newline
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include \char`\"{}../kbc/i8042.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}keyboard.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}../kbc/kbc.\+h\char`\"{}}\newline
Include dependency graph for keyboard.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{keyboard_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int() \mbox{\hyperlink{keyboard_8c_a178b1db0b319dccad2840cc3fd273132}{keyboard\+\_\+subscribe\+\_\+int}} (uint8\+\_\+t $\ast$bit\+\_\+no)
\begin{DoxyCompactList}\small\item\em Subscribes and enables keyboard interrupts. \end{DoxyCompactList}\item 
int() \mbox{\hyperlink{keyboard_8c_a32cc4de66854f8a7bd909e7aa8b901ed}{keyboard\+\_\+unsubscribe\+\_\+int}} ()
\begin{DoxyCompactList}\small\item\em Unsubscribes keyboard interrupts. \end{DoxyCompactList}\item 
int() \mbox{\hyperlink{keyboard_8c_ab72fb7a6e78f00cc63adbfbc3276d1eb}{read\+\_\+status\+\_\+register}} (uint8\+\_\+t $\ast$st)
\begin{DoxyCompactList}\small\item\em Reads a register from the keyboard. \end{DoxyCompactList}\item 
int() \mbox{\hyperlink{keyboard_8c_ad02355ed53c92ce490bb67d40c44c0b4}{read\+\_\+out\+\_\+buffer}} (uint8\+\_\+t $\ast$out)
\begin{DoxyCompactList}\small\item\em Reads the outputbuffer from the keyboard. \end{DoxyCompactList}\item 
void() \mbox{\hyperlink{keyboard_8c_aea970a154161a35f6894898a092ed70a}{kbc\+\_\+ih}} ()
\begin{DoxyCompactList}\small\item\em interrupts handler of the keyboard \end{DoxyCompactList}\item 
bool() \mbox{\hyperlink{keyboard_8c_a9d5130e52e1ba8088eb5c9563feb17db}{test\+\_\+status\+\_\+polling}} (uint8\+\_\+t st)
\begin{DoxyCompactList}\small\item\em tests if the status polling is valid \end{DoxyCompactList}\item 
void() \mbox{\hyperlink{keyboard_8c_a36aef6e0db295f00cbc0db17796a3b5a}{clean\+\_\+scan\+\_\+info}} (struct \mbox{\hyperlink{structscancode__info}{scancode\+\_\+info}} $\ast$scan)
\begin{DoxyCompactList}\small\item\em cleans the scan info \end{DoxyCompactList}\item 
bool() \mbox{\hyperlink{keyboard_8c_aafd4a17c8dbc26ddeb0f405c9d993d92}{receive\+\_\+keyboard\+\_\+scan}} (struct \mbox{\hyperlink{structscancode__info}{scancode\+\_\+info}} $\ast$\mbox{\hyperlink{keyboard_8c_a9c41448501b37ddc79dbc1f0e5a37636}{scan\+\_\+info}}, uint8\+\_\+t $\ast$\mbox{\hyperlink{keyboard_8c_aa1de7a5557e9d96b83cf03f73c92163f}{scancode}})
\begin{DoxyCompactList}\small\item\em receives the keyboard scan \end{DoxyCompactList}\item 
int() \mbox{\hyperlink{keyboard_8c_a6ac0bdf5df1c2fd3b92a16034e743ffd}{kbc\+\_\+enable\+\_\+interrupts}} ()
\begin{DoxyCompactList}\small\item\em enables the interrupts of the keyboard \end{DoxyCompactList}\item 
int \mbox{\hyperlink{keyboard_8c_a7c5f611b9e6ee9f0f11a224c8a196b23}{try\+\_\+read\+\_\+out\+\_\+buffer}} (uint8\+\_\+t $\ast$out)
\begin{DoxyCompactList}\small\item\em tries to read the out buffer \end{DoxyCompactList}\item 
int() \mbox{\hyperlink{keyboard_8c_a95f165b5a576577a6c2fff2013f71d5b}{check\+\_\+\+ESC}} ()
\begin{DoxyCompactList}\small\item\em checks if the ESC key was pressed \end{DoxyCompactList}\item 
int() \mbox{\hyperlink{keyboard_8c_a23cd4ccfc95bca48e72307ca8b416f18}{break\+\_\+from\+\_\+cycles}} ()
\begin{DoxyCompactList}\small\item\em breaks from the cycles \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{keyboard_8c_a96f78a87d064e47d627d222f67a8d012}{hook\+\_\+id}} = 1
\item 
uint8\+\_\+t \mbox{\hyperlink{keyboard_8c_aa1de7a5557e9d96b83cf03f73c92163f}{scancode}}
\item 
struct \mbox{\hyperlink{structscancode__info}{scancode\+\_\+info}} \mbox{\hyperlink{keyboard_8c_a9c41448501b37ddc79dbc1f0e5a37636}{scan\+\_\+info}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
File containing the implementation of the functions to interact with the keyboard. 



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{keyboard_8c_a23cd4ccfc95bca48e72307ca8b416f18}\label{keyboard_8c_a23cd4ccfc95bca48e72307ca8b416f18}} 
\index{keyboard.c@{keyboard.c}!break\_from\_cycles@{break\_from\_cycles}}
\index{break\_from\_cycles@{break\_from\_cycles}!keyboard.c@{keyboard.c}}
\doxysubsubsection{\texorpdfstring{break\_from\_cycles()}{break\_from\_cycles()}}
{\footnotesize\ttfamily int() break\+\_\+from\+\_\+cycles (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



breaks from the cycles 

Breaks from the cycles.

This function breaks from the cycles.

\begin{DoxyReturn}{Returns}
0 upon success, 1 otherwise 
\end{DoxyReturn}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{keyboard_8c_a23cd4ccfc95bca48e72307ca8b416f18_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{keyboard_8c_a95f165b5a576577a6c2fff2013f71d5b}\label{keyboard_8c_a95f165b5a576577a6c2fff2013f71d5b}} 
\index{keyboard.c@{keyboard.c}!check\_ESC@{check\_ESC}}
\index{check\_ESC@{check\_ESC}!keyboard.c@{keyboard.c}}
\doxysubsubsection{\texorpdfstring{check\_ESC()}{check\_ESC()}}
{\footnotesize\ttfamily int() check\+\_\+\+ESC (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



checks if the ESC key was pressed 

Checks if the ESC key was pressed.

This function checks if the ESC key was pressed.

\begin{DoxyReturn}{Returns}
1 if the ESC key was pressed, 0 otherwise 
\end{DoxyReturn}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{keyboard_8c_a95f165b5a576577a6c2fff2013f71d5b_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{keyboard_8c_a36aef6e0db295f00cbc0db17796a3b5a}\label{keyboard_8c_a36aef6e0db295f00cbc0db17796a3b5a}} 
\index{keyboard.c@{keyboard.c}!clean\_scan\_info@{clean\_scan\_info}}
\index{clean\_scan\_info@{clean\_scan\_info}!keyboard.c@{keyboard.c}}
\doxysubsubsection{\texorpdfstring{clean\_scan\_info()}{clean\_scan\_info()}}
{\footnotesize\ttfamily void() clean\+\_\+scan\+\_\+info (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structscancode__info}{scancode\+\_\+info}} $\ast$}]{scan }\end{DoxyParamCaption})}



cleans the scan info 

Cleans the scancode information.

This function cleans the scan info.


\begin{DoxyParams}{Parameters}
{\em scan} & scan info to be cleaned \\
\hline
\end{DoxyParams}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{keyboard_8c_a36aef6e0db295f00cbc0db17796a3b5a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{keyboard_8c_a6ac0bdf5df1c2fd3b92a16034e743ffd}\label{keyboard_8c_a6ac0bdf5df1c2fd3b92a16034e743ffd}} 
\index{keyboard.c@{keyboard.c}!kbc\_enable\_interrupts@{kbc\_enable\_interrupts}}
\index{kbc\_enable\_interrupts@{kbc\_enable\_interrupts}!keyboard.c@{keyboard.c}}
\doxysubsubsection{\texorpdfstring{kbc\_enable\_interrupts()}{kbc\_enable\_interrupts()}}
{\footnotesize\ttfamily int() kbc\+\_\+enable\+\_\+interrupts (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



enables the interrupts of the keyboard 

Enables the keyboard interrupts.

enables the KBC interrupts

This function enables the interrupts of the keyboard.

\begin{DoxyReturn}{Returns}
int 0 upon success, 1 otherwise 
\end{DoxyReturn}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{keyboard_8c_a6ac0bdf5df1c2fd3b92a16034e743ffd_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{keyboard_8c_aea970a154161a35f6894898a092ed70a}\label{keyboard_8c_aea970a154161a35f6894898a092ed70a}} 
\index{keyboard.c@{keyboard.c}!kbc\_ih@{kbc\_ih}}
\index{kbc\_ih@{kbc\_ih}!keyboard.c@{keyboard.c}}
\doxysubsubsection{\texorpdfstring{kbc\_ih()}{kbc\_ih()}}
{\footnotesize\ttfamily void() kbc\+\_\+ih (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



interrupts handler of the keyboard 

This function handles interrupts the keyboard. Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{keyboard_8c_aea970a154161a35f6894898a092ed70a_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{keyboard_8c_aea970a154161a35f6894898a092ed70a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{keyboard_8c_a178b1db0b319dccad2840cc3fd273132}\label{keyboard_8c_a178b1db0b319dccad2840cc3fd273132}} 
\index{keyboard.c@{keyboard.c}!keyboard\_subscribe\_int@{keyboard\_subscribe\_int}}
\index{keyboard\_subscribe\_int@{keyboard\_subscribe\_int}!keyboard.c@{keyboard.c}}
\doxysubsubsection{\texorpdfstring{keyboard\_subscribe\_int()}{keyboard\_subscribe\_int()}}
{\footnotesize\ttfamily int() keyboard\+\_\+subscribe\+\_\+int (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{bit\+\_\+no }\end{DoxyParamCaption})}



Subscribes and enables keyboard interrupts. 

Subscribes keyboard interrupts.

This function subscribes interrupts of the keyboard.


\begin{DoxyParams}{Parameters}
{\em bit\+\_\+no} & Address of memory to be initialized with the bit number to be set in the mask returned upon an interrupt\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 0 upon success, 1 otherwise 
\end{DoxyReturn}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{keyboard_8c_a178b1db0b319dccad2840cc3fd273132_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{keyboard_8c_a32cc4de66854f8a7bd909e7aa8b901ed}\label{keyboard_8c_a32cc4de66854f8a7bd909e7aa8b901ed}} 
\index{keyboard.c@{keyboard.c}!keyboard\_unsubscribe\_int@{keyboard\_unsubscribe\_int}}
\index{keyboard\_unsubscribe\_int@{keyboard\_unsubscribe\_int}!keyboard.c@{keyboard.c}}
\doxysubsubsection{\texorpdfstring{keyboard\_unsubscribe\_int()}{keyboard\_unsubscribe\_int()}}
{\footnotesize\ttfamily int() keyboard\+\_\+unsubscribe\+\_\+int (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Unsubscribes keyboard interrupts. 

This function unsubscribes keyboard interrupts.

\begin{DoxyReturn}{Returns}
int 0 upon success, 1 otherwise 
\end{DoxyReturn}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{keyboard_8c_a32cc4de66854f8a7bd909e7aa8b901ed_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{keyboard_8c_ad02355ed53c92ce490bb67d40c44c0b4}\label{keyboard_8c_ad02355ed53c92ce490bb67d40c44c0b4}} 
\index{keyboard.c@{keyboard.c}!read\_out\_buffer@{read\_out\_buffer}}
\index{read\_out\_buffer@{read\_out\_buffer}!keyboard.c@{keyboard.c}}
\doxysubsubsection{\texorpdfstring{read\_out\_buffer()}{read\_out\_buffer()}}
{\footnotesize\ttfamily int() read\+\_\+out\+\_\+buffer (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{out }\end{DoxyParamCaption})}



Reads the outputbuffer from the keyboard. 

Reads the output buffer.

This function reads a register from the keyboard.


\begin{DoxyParams}{Parameters}
{\em reg} & Register to be read \\
\hline
{\em st} & Address of memory to be initialized with the value read from the register\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 0 upon success, 1 otherwise 
\end{DoxyReturn}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=283pt]{keyboard_8c_ad02355ed53c92ce490bb67d40c44c0b4_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{keyboard_8c_ad02355ed53c92ce490bb67d40c44c0b4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{keyboard_8c_ab72fb7a6e78f00cc63adbfbc3276d1eb}\label{keyboard_8c_ab72fb7a6e78f00cc63adbfbc3276d1eb}} 
\index{keyboard.c@{keyboard.c}!read\_status\_register@{read\_status\_register}}
\index{read\_status\_register@{read\_status\_register}!keyboard.c@{keyboard.c}}
\doxysubsubsection{\texorpdfstring{read\_status\_register()}{read\_status\_register()}}
{\footnotesize\ttfamily int() read\+\_\+status\+\_\+register (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{st }\end{DoxyParamCaption})}



Reads a register from the keyboard. 

this function reads the status register

This function reads a register from the keyboard.


\begin{DoxyParams}{Parameters}
{\em reg} & Register to be read \\
\hline
{\em st} & Address of memory to be initialized with the value read from the register\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 0 upon success, 1 otherwise 
\end{DoxyReturn}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=306pt]{keyboard_8c_ab72fb7a6e78f00cc63adbfbc3276d1eb_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{keyboard_8c_ab72fb7a6e78f00cc63adbfbc3276d1eb_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{keyboard_8c_aafd4a17c8dbc26ddeb0f405c9d993d92}\label{keyboard_8c_aafd4a17c8dbc26ddeb0f405c9d993d92}} 
\index{keyboard.c@{keyboard.c}!receive\_keyboard\_scan@{receive\_keyboard\_scan}}
\index{receive\_keyboard\_scan@{receive\_keyboard\_scan}!keyboard.c@{keyboard.c}}
\doxysubsubsection{\texorpdfstring{receive\_keyboard\_scan()}{receive\_keyboard\_scan()}}
{\footnotesize\ttfamily bool() receive\+\_\+keyboard\+\_\+scan (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structscancode__info}{scancode\+\_\+info}} $\ast$}]{scan\+\_\+info,  }\item[{uint8\+\_\+t $\ast$}]{scancode }\end{DoxyParamCaption})}



receives the keyboard scan 

Receives the scancode from the keyboard.

This function receives the keyboard scan.


\begin{DoxyParams}{Parameters}
{\em scan\+\_\+info} & scan info to be filled \\
\hline
{\em scancode} & scancode to be filled\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if the scan is valid, false otherwise 
\end{DoxyReturn}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=342pt]{keyboard_8c_aafd4a17c8dbc26ddeb0f405c9d993d92_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{keyboard_8c_aafd4a17c8dbc26ddeb0f405c9d993d92_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{keyboard_8c_a9d5130e52e1ba8088eb5c9563feb17db}\label{keyboard_8c_a9d5130e52e1ba8088eb5c9563feb17db}} 
\index{keyboard.c@{keyboard.c}!test\_status\_polling@{test\_status\_polling}}
\index{test\_status\_polling@{test\_status\_polling}!keyboard.c@{keyboard.c}}
\doxysubsubsection{\texorpdfstring{test\_status\_polling()}{test\_status\_polling()}}
{\footnotesize\ttfamily bool() test\+\_\+status\+\_\+polling (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{st }\end{DoxyParamCaption})}



tests if the status polling is valid 

Tests if the status polling is valid.

This function tests if the status polling is valid.


\begin{DoxyParams}{Parameters}
{\em st} & status to be tested\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if the status polling is valid, false otherwise 
\end{DoxyReturn}
\mbox{\Hypertarget{keyboard_8c_a7c5f611b9e6ee9f0f11a224c8a196b23}\label{keyboard_8c_a7c5f611b9e6ee9f0f11a224c8a196b23}} 
\index{keyboard.c@{keyboard.c}!try\_read\_out\_buffer@{try\_read\_out\_buffer}}
\index{try\_read\_out\_buffer@{try\_read\_out\_buffer}!keyboard.c@{keyboard.c}}
\doxysubsubsection{\texorpdfstring{try\_read\_out\_buffer()}{try\_read\_out\_buffer()}}
{\footnotesize\ttfamily int try\+\_\+read\+\_\+out\+\_\+buffer (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{out }\end{DoxyParamCaption})}



tries to read the out buffer 

Try to read the output buffer.

This function tries to read the out buffer.


\begin{DoxyParams}{Parameters}
{\em out} & out buffer to be filled\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 0 upon success, 1 otherwise 
\end{DoxyReturn}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{keyboard_8c_a7c5f611b9e6ee9f0f11a224c8a196b23_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{keyboard_8c_a7c5f611b9e6ee9f0f11a224c8a196b23_icgraph}
\end{center}
\end{figure}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{keyboard_8c_a96f78a87d064e47d627d222f67a8d012}\label{keyboard_8c_a96f78a87d064e47d627d222f67a8d012}} 
\index{keyboard.c@{keyboard.c}!hook\_id@{hook\_id}}
\index{hook\_id@{hook\_id}!keyboard.c@{keyboard.c}}
\doxysubsubsection{\texorpdfstring{hook\_id}{hook\_id}}
{\footnotesize\ttfamily int hook\+\_\+id = 1}

\mbox{\Hypertarget{keyboard_8c_a9c41448501b37ddc79dbc1f0e5a37636}\label{keyboard_8c_a9c41448501b37ddc79dbc1f0e5a37636}} 
\index{keyboard.c@{keyboard.c}!scan\_info@{scan\_info}}
\index{scan\_info@{scan\_info}!keyboard.c@{keyboard.c}}
\doxysubsubsection{\texorpdfstring{scan\_info}{scan\_info}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structscancode__info}{scancode\+\_\+info}} scan\+\_\+info}

\mbox{\Hypertarget{keyboard_8c_aa1de7a5557e9d96b83cf03f73c92163f}\label{keyboard_8c_aa1de7a5557e9d96b83cf03f73c92163f}} 
\index{keyboard.c@{keyboard.c}!scancode@{scancode}}
\index{scancode@{scancode}!keyboard.c@{keyboard.c}}
\doxysubsubsection{\texorpdfstring{scancode}{scancode}}
{\footnotesize\ttfamily uint8\+\_\+t scancode}

